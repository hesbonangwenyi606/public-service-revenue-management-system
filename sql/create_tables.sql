-- create_tables.sql
-- Run these statements in SQL*Plus as a user with necessary privileges or as the PSRM_DB owner.

CREATE TABLE TAXPAYERS (
  TAXPAYER_ID VARCHAR2(50) PRIMARY KEY,
  NAME VARCHAR2(200),
  ID_NUMBER VARCHAR2(50),
  EMAIL VARCHAR2(200),
  PHONE VARCHAR2(50),
  ADDRESS VARCHAR2(400),
  REGISTERED_DATE DATE DEFAULT SYSDATE
);

CREATE TABLE REGISTRATION_LOGS (
  LOG_ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  TAXPAYER_ID VARCHAR2(50),
  ACTION VARCHAR2(100),
  ACTION_DATE DATE DEFAULT SYSDATE,
  DETAILS CLOB,
  CONSTRAINT fk_taxpayer FOREIGN KEY (TAXPAYER_ID) REFERENCES TAXPAYERS(TAXPAYER_ID)
);

CREATE TABLE PAYMENTS (
  PAYMENT_ID VARCHAR2(100) PRIMARY KEY,
  TAXPAYER_ID VARCHAR2(50),
  AMOUNT NUMBER(15,2),
  METHOD VARCHAR2(50),
  STATUS VARCHAR2(50),
  TRANSACTION_DATE DATE DEFAULT SYSDATE,
  RECEIPT_NUMBER VARCHAR2(100),
  CONSTRAINT fk_payment_taxpayer FOREIGN KEY (TAXPAYER_ID) REFERENCES TAXPAYERS(TAXPAYER_ID)
);